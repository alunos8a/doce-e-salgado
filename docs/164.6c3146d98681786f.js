"use strict";(self.webpackChunkdoce_e_salgado=self.webpackChunkdoce_e_salgado||[]).push([[164],{164:(z,b,m)=>{m.r(b),m.d(b,{GameModule:()=>J});var x=m(895),e=m(256),y=m(322);const E=function(){return["/player"]};let M=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-home"]],decls:12,vars:2,consts:[[1,"container"],[1,"card"],[1,"settings"],[1,"play"],[1,"button-play"],[3,"routerLink"],[1,"exit"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button"),e._uU(4,"settings"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"button",5),e._uU(8,"play"),e.qZA()()(),e.TgZ(9,"div",6)(10,"button"),e._uU(11,"exit"),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("routerLink",e.DdM(1,E)))},dependencies:[y.rH],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center}.card[_ngcontent-%COMP%]{display:flex;flex-direction:row;background-color:#fff;height:800px;width:1200px;padding:10px;border-radius:5px;background-image:url(/assets/img/home-screen.png);background-size:cover}.settings[_ngcontent-%COMP%]{height:auto}.play[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;top:300px;font-size:large;height:100px;width:100%}.settings[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;left:0;top:0;font-size:large;height:100px;width:100%}.button-play[_ngcontent-%COMP%]{display:block;margin:auto}.exit[_ngcontent-%COMP%]{display:block;position:relative;z-index:1;top:600px;left:0;font-size:large;height:100px;width:100%}"]}),s})();const Z=function(){return["/game"]};let O=(()=>{class s{constructor(){this.onKeyDown=t=>{let o=t.key.toLowerCase();this.changeCharacter(o)},this.charactersDoce=[{name:"P\xe3o doce",url:"../../../assets/img/characters/0.png"},{name:"Rosquinha",url:"../../../assets/img/characters/1.png"},{name:"Brigadeiro",url:"../../../assets/img/characters/2.png"}],this.charactersSalgado=[{name:"Brigadeiro",url:"../../../assets/img/characters/3.png"}],this.characterDocePosition=0,this.characterDoce=this.charactersDoce[this.characterDocePosition],this.characterSalgadoPosition=0,this.characterSalgado=this.charactersSalgado[this.characterSalgadoPosition]}ngOnInit(){}changeCharacter(t){"a"==t?this.characterDocePosition=(this.characterDocePosition+this.charactersDoce.length-1)%this.charactersDoce.length:"d"==t?this.characterDocePosition=(this.characterDocePosition+1)%this.charactersDoce.length:"arrowleft"==t?this.characterSalgadoPosition=(this.characterSalgadoPosition+this.charactersSalgado.length-1)%this.charactersSalgado.length:"arrowright"==t&&(this.characterSalgadoPosition=(this.characterSalgadoPosition+1)%this.charactersSalgado.length),this.characterDoce=this.charactersDoce[this.characterDocePosition],this.characterSalgado=this.charactersSalgado[this.characterSalgadoPosition]}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-player"]],hostBindings:function(t,o){1&t&&e.NdJ("keydown",function(n){return o.onKeyDown(n)},!1,e.pYS)},decls:25,vars:6,consts:[[1,"container"],[1,"card"],[1,"title"],[1,"player"],[1,"player-select"],[1,"buttom-change"],["src","../../../assets/img/left.png","alt","",3,"click"],[1,"skin"],[1,"name"],["alt","",3,"src"],["src","../../../assets/img/right.png","alt","",3,"click"],[1,"play",3,"routerLink"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Selecionar personagem "),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"img",6),e.NdJ("click",function(){return o.changeCharacter("a")}),e.qZA()(),e.TgZ(8,"div",7)(9,"div",8),e._uU(10),e.qZA(),e._UZ(11,"img",9),e.qZA(),e.TgZ(12,"div",5)(13,"img",10),e.NdJ("click",function(){return o.changeCharacter("d")}),e.qZA()()(),e.TgZ(14,"div",4)(15,"div",5)(16,"img",6),e.NdJ("click",function(){return o.changeCharacter("arrowleft")}),e.qZA()(),e.TgZ(17,"div",7)(18,"div",8),e._uU(19),e.qZA(),e._UZ(20,"img",9),e.qZA(),e.TgZ(21,"div",5)(22,"img",10),e.NdJ("click",function(){return o.changeCharacter("arrowright")}),e.qZA()()()(),e.TgZ(23,"div",11),e._uU(24," play "),e.qZA()()()),2&t&&(e.xp6(10),e.hij(" ",o.characterDoce.name," "),e.xp6(1),e.s9C("src",o.characterDoce.url,e.LSH),e.xp6(8),e.hij(" ",o.characterSalgado.name," "),e.xp6(1),e.s9C("src",o.characterSalgado.url,e.LSH),e.xp6(3),e.Q6J("routerLink",e.DdM(5,Z)))},dependencies:[y.rH],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center}.card[_ngcontent-%COMP%]{background-color:#fff;height:800px;width:1200px;padding:10px;border-radius:5px}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:xx-large;font-weight:700}.player[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:80%}.player-select[_ngcontent-%COMP%]{display:flex;justify-content:center;border:solid black;height:100%;width:50%}.skin[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.name[_ngcontent-%COMP%]{font-size:xx-large}.buttom-change[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.play[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),s})();const w=[{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Ela encontrou um emprego.",opcoes:["um","emprego","encontrou"],resposta:"emprego"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: O sof\xe1 \xe9 pequeno.",opcoes:["\xe9","pequeno","sof\xe1"],resposta:"sof\xe1"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: A sala \xe9 grande.",opcoes:["sala","grande","A"],resposta:"sala"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: O p\xe1ssaro come todas as frutas.",opcoes:["come/O","p\xe1ssaro/frutas","as/todas"],resposta:"p\xe1ssaro/frutas"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: A \xe1rvore \xe9 bonita.",opcoes:["\xe1rvore","\xe9","bonita"],resposta:"\xe1rvore"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: A menina \xe9 feia.",opcoes:["feia","A","menina"],resposta:"menina"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Que filme ruim!",opcoes:["ruim","filme","Que"],resposta:"filme"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Os \xf3culos quebraram.",opcoes:["quebraram","os","\xf3culos"],resposta:"\xf3culos"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Ela mora em outro pa\xeds.",opcoes:["pa\xeds","ela","em"],resposta:"pa\xeds"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Maria viajou ontem.",opcoes:["viajou","Maria","ontem"],resposta:"Maria"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Helena mora no Canad\xe1.",opcoes:["mora/no","Helena/Canad\xe1","Canad\xe1/mora"],resposta:"Helena/Canad\xe1"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Ana \xe9 inteligente!",opcoes:["\xe9","inteligente","Ana"],resposta:"Ana"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: O Brasil \xe9 lindo!",opcoes:["lindo","Brasil","\xe9"],resposta:"Brasil"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Ele gosta de comer doces.",opcoes:["doces","Ele","gosta"],resposta:"doces"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Miguel \xe9 bom no v\xf4lei.",opcoes:["bom/\xe9","no/v\xf4lei","Miguel/v\xf4lei"],resposta:"Miguel/v\xf4lei"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: J\xfalia sempre faz novos amigos.",opcoes:["J\xfalia/sempre","amigos/faz","amigos/J\xfalia"],resposta:"amigos/J\xfalia"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: O casaco \xe9 feio.",opcoes:["casaco","feio","\xe9"],resposta:"casaco"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Eles est\xe3o trabalhando em um jogo.",opcoes:["est\xe3o","Eles","jogo"],resposta:"jogo"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: Carla gosta de ler.",opcoes:["gosta","Carla","ler"],resposta:"Carla"},{pergunta:"Leia a ora\xe7\xe3o abaixo e tente encontrar o(s) substantivo(s) que est\xe3o nela: C\xe9lia \xe9 muito paciente.",opcoes:["paciente","C\xe9lia","muito"],resposta:"C\xe9lia"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Ela trabalhou muito.",opcoes:["trabalhou","muito","ela"],resposta:"trabalhou"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Jo\xe3o morou em outra cidade.",opcoes:["Jo\xe3o","outra","morou"],resposta:"morou"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: J\xfalia sempre brinca sozinha.",opcoes:["sozinha","sempre","brinca"],resposta:"brinca"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Eles trabalham no campo.",opcoes:["trabalham","campo","no"],resposta:"trabalham"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: A minha irm\xe3 fala ingl\xeas.",opcoes:["minha","fala","ingl\xeas"],resposta:"fala"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Miguel joga v\xf4lei.",opcoes:["joga","Miguel","v\xf4lei"],resposta:"joga"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Voc\xeas gostam de ler ou n\xe3o?",opcoes:["voc\xeas/ler","gostam/ler","n\xe3o/ou"],resposta:"gostam/ler"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Seu Jos\xe9 vende pipoca na pra\xe7a.",opcoes:["vende","pra\xe7a","pipoca"],resposta:"vende"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: As torcidas gritam nos jogos.",opcoes:["nos","torcidas","gritam"],resposta:"gritam"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: N\xe3o como comida japonesa...",opcoes:["como","japonesa","N\xe3o"],resposta:"como"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Voc\xea gosta de comida mexicana?",opcoes:["mexicana","comida","gosta"],resposta:"gosta"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Em janeiro come\xe7a a esta\xe7\xe3o chuvosa.",opcoes:["janeiro","come\xe7a","chuvosa"],resposta:"come\xe7a"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Ningu\xe9m faz comida como minha m\xe3e.",opcoes:["Ningu\xe9m","m\xe3e","faz"],resposta:"faz"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Algumas pessoas sentem mais frio que outras.",opcoes:["pessoas","Algumas","sentem"],resposta:"sentem"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Eduardo malha toda tarde.",opcoes:["malha","tarde","Eduardo"],resposta:"malha"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Eu e meu irm\xe3o dividimos tudo!",opcoes:["meu","dividimos","irm\xe3o"],resposta:"dividimos"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Ele adoeceu essa semana.",opcoes:["semana","essa","adoeceu"],resposta:"adoeceu"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Amo nadar na praia com meus amigos!",opcoes:["amo/nadar","praia/amigos","na/com"],resposta:"amo/nadar"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Voc\xea ganhou um pr\xeamio no sorteio!",opcoes:["Voc\xea","pr\xeamio","ganhou"],resposta:"ganhou"},{pergunta:"Encontre qual \xe9 o verbo presente na ora\xe7\xe3o a seguir: Joana \xe9 professora.",opcoes:["\xe9","professora","Joana"],resposta:"\xe9"},{pergunta:"Quanto \xe9 19x20?",opcoes:["370","380","385"],resposta:380},{pergunta:"Quanto \xe9 11x18?",opcoes:["198","200","199"],resposta:"198"},{pergunta:"Quanto \xe9 19x19?",opcoes:["360","362","361"],resposta:"361"},{pergunta:"Quanto \xe9 13x18?",opcoes:["235","230","234"],resposta:"234"},{pergunta:"Quanto \xe9 16x19?",opcoes:["300","305","304"],resposta:"304"},{pergunta:"Quanto \xe9 12x10?",opcoes:["110","120","115"],resposta:"120"},{pergunta:"Quanto \xe9 96x5?",opcoes:["480","470","485"],resposta:"480"},{pergunta:"Quanto \xe9 48x2?",opcoes:["96","90","95"],resposta:"96"},{pergunta:"Quanto \xe9 12x5?",opcoes:["65","70","60"],resposta:"60"},{pergunta:"Quanto \xe9 76x3?",opcoes:["230","228","227"],resposta:"228"}],P={right:[1,200,400,600,800,1e3],left:[1200,1400,1600,1800,2e3,2200],y:[1,331]},p=[{url:"./assets/img/cenarios/fase1.png",width:2130,height:1420,elements:[[{x:37,y:470},{x:380,y:470},{x:400,y:480},{x:435,y:480},{x:448,y:470},{x:551,y:470},{x:561,y:480},{x:603,y:480},{x:613,y:470},{x:672,y:470},{x:672,y:433},{x:685,y:418},{x:696,y:433},{x:712,y:412},{x:712,y:30},{x:37,y:30},{x:37,y:470}],[{x:37,y:395},{x:260,y:395},{x:260,y:415},{x:37,y:415}],[{x:37,y:302},{x:315,y:315},{x:356,y:365},{x:468,y:365},{x:480,y:375},{x:530,y:375},{x:540,y:365},{x:628,y:365},{x:635,y:390},{x:333,y:390},{x:309,y:335},{x:37,y:330}],[{x:132,y:226},{x:350,y:232},{x:375,y:262},{x:650,y:262},{x:650,y:280},{x:712,y:280},{x:712,y:318},{x:677,y:318},{x:657,y:290},{x:590,y:288},{x:574,y:272},{x:370,y:272},{x:341,y:249},{x:132,y:249},{x:132,y:227}],[{x:37,y:166},{x:503,y:166},{x:519,y:186},{x:649,y:186},{x:649,y:144},{x:500,y:144},{x:475,y:119},{x:314,y:117},{x:314,y:144},{x:93,y:144},{x:93,y:103},{x:37,y:103}]],extraElements:[{xSprite:0,ySprite:0,spriteWidth:25,spriteHeight:202,positionX:39,positionY:33,width:8,height:68},{xSprite:25,ySprite:0,spriteWidth:194,spriteHeight:202,positionX:378,positionY:412,width:69,height:68}]},{url:"./assets/img/cenarios/fase2.png",width:2128,height:1421,elements:[[{x:0,y:478},{x:144,y:478},{x:145,y:484},{x:250,y:484},{x:253,y:478},{x:488,y:478},{x:500,y:489},{x:585,y:489},{x:592,y:478},{x:652,y:474},{x:750,y:420}],[{x:0,y:400},{x:379,y:380},{x:468,y:347},{x:590,y:347},{x:590,y:331},{x:462,y:332},{x:378,y:377},{x:378,y:377},{x:378,y:377},{x:330,y:377},{x:326,y:388},{x:161,y:387},{x:150,y:374},{x:27,y:374},{x:0,y:345}],[{x:512,y:403},{x:591,y:403},{x:615,y:420},{x:488,y:420},{x:512,y:403}],[{x:750,y:363},{x:650,y:363},{x:671,y:345},{x:750,y:345},{x:750,y:363}],[{x:362,y:275},{x:750,y:272},{x:750,y:215},{x:690,y:256},{x:527,y:260},{x:524,y:268},{x:406,y:268},{x:403,y:260},{x:344,y:262},{x:344,y:262},{x:332,y:274},{x:155,y:274},{x:149,y:265},{x:110,y:265}]],extraElements:[]}],G=["game"],L=["control1"];function D(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"div")(3,"h1"),e._uU(4,"DOCE E SALGADO"),e.qZA()(),e.TgZ(5,"div"),e._uU(6,"engrenagem"),e.qZA(),e.TgZ(7,"div")(8,"div",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.playPause())}),e._uU(9,"play"),e.qZA()(),e.TgZ(10,"div"),e._uU(11,"ilustrac\xe7oes"),e.qZA()()()}}function j(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"p",22),e.NdJ("click",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.correctAnswer(i.target))}),e._uU(1),e.qZA()}if(2&s){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function H(s,a){if(1&s&&(e.TgZ(0,"div",14)(1,"div",17)(2,"div",18)(3,"div",19)(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",20),e.YNc(7,j,2,1,"p",21),e.qZA()()()()),2&s){const t=e.oxw();e.xp6(5),e.Oqu(t.questao.pergunta),e.xp6(2),e.Q6J("ngForOf",t.questao.opcoes)}}const I=[{path:"",component:M},{path:"game",component:(()=>{class s{constructor(){this.spritesPersonagens=new Image,this.spritesFase1=new Image,this.cenarios=[new Image,new Image,new Image,new Image],this.player1={name:"",player:0,type:"doce",direction:{horizontal:"right",vertical:"down"},running:!1,jumping:!1,spriteNumber:0,position:{x:0,y:0},positionJumpY:0,lastKeyPress:"",life:100,extraLife:1},this.player2={name:"",player:1,type:"salgado",direction:{horizontal:"right",vertical:"down"},running:!1,jumping:!1,spriteNumber:0,position:{x:0,y:0},positionJumpY:0,lastKeyPress:"",life:100,extraLife:1},this.onKeyDownSpace=this.playPause,this.onKeyDown=t=>{let o=t.key.toLowerCase();this.play&&this.getDirection(o)},this.onKeyUp=t=>{let o=t.key.toLowerCase();this.play&&this.stopMovement(o)},this.onClick=t=>{if(["control1","control2"].includes(t.target.id)){let o=window.screen.height,i=window.screen.width;console.log(i,o),console.log(i/t.touches[0].clientX,o/t.touches[0].clientY)}},this.game={},this.control1={},this.movementKeysPlayer1={a:"left",d:"right",w:"up"},this.movementKeysPlayer2={arrowleft:"left",arrowright:"right",arrowup:"up"},this.cookie=[{moving:!1,direction:1,position:{x:652,y:100},element:{xSprite:693,ySprite:0,spriteWidth:176,spriteHeight:202,positionX:652,positionY:100,width:58,height:68},points:[{x:652,y:153},{x:710,y:153},{x:710,y:165},{x:652,y:165},{x:652,y:153}]}],this.buttons=[[{position:{x:216,y:202}},{position:{x:566,y:119}}]],this.questao=w[Math.floor(Math.random()*w.length)],this.question=!1,this.play=!0,this.debug=!1,this.fase=0,this.buttomPress=!0}ngOnInit(){console.log(this.questao),this.spritesPersonagens.src="./assets/img/SPRITES.png",this.spritesFase1.src="./assets/img/cenarios/sprites_fase1.png";for(let t=0;t<p.length;t++)this.cenarios[t].src=p[t].url;this.context=this.game.nativeElement.getContext("2d"),this.contextControl1=this.control1.nativeElement.getContext("2d"),this.player1.position={x:42,y:400},this.player2.position={x:75,y:400},this.loop()}playPause(){this.play=!this.play}loop(){this.play&&(this.refreshPositions(),this.draw()),window.requestAnimationFrame(this.loop.bind(this))}getDirection(t){if(t in this.movementKeysPlayer1)this.setDirection(this.player1,this.movementKeysPlayer1[t]);else if(t in this.movementKeysPlayer2)this.setDirection(this.player2,this.movementKeysPlayer2[t]);else if("s"==t)for(let o in this.buttons)this.pressButton(this.player1,this.buttons[this.fase][o].position);else if("arrowdown"==t)for(let o in this.buttons[this.fase])this.pressButton(this.player2,this.buttons[this.fase][o].position)}setDirection(t,o){"up"==o?t.jumping||(t.direction.vertical=o,t.positionJumpY=t.position.y,t.jumping=!0):t.direction.horizontal=o,t.running=!0}stopMovement(t){t in this.movementKeysPlayer1?(this.player1.running=!1,this.player1.direction.vertical="down"):t in this.movementKeysPlayer2&&(this.player2.running=!1,this.player2.direction.vertical="down")}collidedLine(t,o,i,n){let l={x:t.position.x,y:t.position.y},u={x:t.position.x+32.5,y:t.position.y},_={x:t.position.x+32.5,y:t.position.y+50},g={x:t.position.x,y:t.position.y+50},d_x=(l.x+u.x)/2,d_y=(l.y+g.y)/2,k=[l,u,_,g];if("vertical"==n)for(let q in k){let r=k[q];if(o.x<r.x&&r.x<i.x||o.x>r.x&&r.x>i.x){let h=o.y+(i.y-o.y)*(r.x-o.x)/(i.x-o.x);if(l.y<h&&h<d_y||u.y<h&&h<d_y){t.direction.vertical="down";break}if(g.y>=h&&h>d_y||_.y>=h&&h>d_y)return t.position.y=h-50,!0}}else if("horizontal"==n&&o.x==i.x&&(o.y<l.y&&l.y<i.y||o.y>l.y&&l.y>i.y||o.y<g.y&&g.y<i.y||o.y>=g.y&&g.y>i.y)){let r=o.x;if(l.x<r&&r<d_x||g.x<r&&r<d_x)return t.position.x=r,!0;if(u.x>r&&r>d_x||_.x>r&&r>d_x)return t.position.x=r-32.5,!0}return!1}collidedX(t){let o=!1;return p[this.fase].elements.forEach(i=>{for(let n=0;n<i.length-1;n++)if(this.collidedLine(t,{x:i[n].x,y:i[n].y},{x:i[n+1].x,y:i[n+1].y},"horizontal")){o=!0;break}}),o}collidedY(t){let o=!1;if(p[this.fase].elements.forEach(i=>{for(let n=0;n<i.length-1;n++)if(this.collidedLine(t,{x:i[n].x,y:i[n].y},{x:i[n+1].x,y:i[n+1].y},"vertical")){o=!0;break}}),this.cookie[this.fase])for(let i=0;i<this.cookie[this.fase].points.length-1;i++)if(this.collidedLine(t,{x:this.cookie[this.fase].points[i].x,y:this.cookie[this.fase].points[i].y},{x:this.cookie[this.fase].points[i+1].x,y:this.cookie[this.fase].points[i+1].y},"vertical")){o=!0;break}return o}refreshPositions(){this.setPlayerPositionX(this.player1),this.setPlayerPositionY(this.player1),this.setPlayerPositionX(this.player2),this.setPlayerPositionY(this.player2),this.cookie[this.fase]&&this.moveCookie(),this.win()}setPlayerPositionX(t){if(t.running){let o=t.position.x;"right"==t.direction.horizontal?o+=7:o-=7,0<=o&&o<=this.game.nativeElement.width-32.5&&(t.position.x=o,t.spriteNumber=Math.floor(t.position.x/30)%6),this.collidedX(t)}}setPlayerPositionY(t){t.jumping&&"up"==t.direction.vertical&&(t.position.y-=12,t.position.y<=t.positionJumpY-100&&(t.direction.vertical="down")),t.position.y>=this.game.nativeElement.height-50?t.position.y=this.game.nativeElement.height-50:this.collidedY(t)?t.jumping=!1:t.position.y+=5}draw(){this.context.clearRect(0,0,this.game.nativeElement.width,this.game.nativeElement.height),this.context.drawImage(this.cenarios[this.fase],0,0,p[this.fase].width,p[this.fase].height,0,0,this.game.nativeElement.width,this.game.nativeElement.height),this.drawPlayer(this.player1),this.drawPlayer(this.player2),this.debug&&p[this.fase].elements.forEach(t=>{this.context.moveTo(t[0].x,t[0].y),t.forEach(o=>{this.context.lineTo(o.x,o.y),this.context.stroke()})}),this.drawElements();for(let t in this.buttons[this.fase])this.onButton(this.player1,this.buttons[this.fase][t].position),this.onButton(this.player2,this.buttons[this.fase][t].position)}drawPlayer(t){this.context.drawImage(this.spritesPersonagens,P[t.direction.horizontal][t.spriteNumber],P.y[t.player],200,331,t.position.x,t.position.y,32.5,50)}drawElements(){p[this.fase].extraElements.forEach(t=>{this.context.drawImage(this.spritesFase1,t.xSprite,t.ySprite,t.spriteWidth,t.spriteHeight,t.positionX,t.positionY,t.width,t.height)}),this.drawCookie()}pressButton(t,o){if(this.cookie[this.fase]){let n=t.position.x<=o.x&&o.x<=t.position.x+32.5;t.position.y<=o.y&&o.y<=t.position.y+50&&n&&(this.cookie[this.fase].moving=!0)}}onButton(t,o){t.position.y<=o.y&&o.y<=t.position.y+50&&t.position.x<=o.x&&o.x<=t.position.x+32.5&&(this.context.font="10px",this.context.fillStyle="red",this.context.fillText(0==t.player?'Aperte "s"':'Aperte "\u2193"',o.x-15,o.y+40))}moveCookie(){if(this.cookie[this.fase].moving){let t=5*this.cookie[this.fase].direction;this.cookie[this.fase].position.y=this.cookie[this.fase].position.y+t;for(let o=0;o<this.cookie[this.fase].points.length;o++)this.cookie[this.fase].points[o].y+=t;this.cookie[this.fase].position.y<100?(this.cookie[this.fase].direction=1,this.cookie[this.fase].moving=!1):this.cookie[this.fase].position.y>215&&(this.cookie[this.fase].direction=-.4)}}drawCookie(){this.cookie[this.fase]&&this.context.drawImage(this.spritesFase1,this.cookie[this.fase].element.xSprite,this.cookie[this.fase].element.ySprite,this.cookie[this.fase].element.spriteWidth,this.cookie[this.fase].element.spriteHeight,this.cookie[this.fase].position.x,this.cookie[this.fase].position.y,this.cookie[this.fase].element.width,this.cookie[this.fase].element.height)}correctAnswer(t){t.innerText==this.questao.resposta&&(this.fase=(this.fase+1)%p.length),this.question=!1,this.resetGame()}win(){this.player1.position.x<=42&&this.player1.position.y<=60&&this.player2.position.x<=42&&this.player2.position.y<=60&&(this.question=!0)}resetGame(){this.player1.position={x:42,y:400},this.player2.position={x:75,y:400}}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-game"]],viewQuery:function(t,o){if(1&t&&(e.Gf(G,7),e.Gf(L,7)),2&t){let i;e.iGM(i=e.CRH())&&(o.game=i.first),e.iGM(i=e.CRH())&&(o.control1=i.first)}},hostBindings:function(t,o){1&t&&e.NdJ("keydown.space",function(n){return o.onKeyDownSpace(n)},!1,e.pYS)("keydown",function(n){return o.onKeyDown(n)},!1,e.pYS)("keyup",function(n){return o.onKeyUp(n)},!1,e.pYS)("touchmove",function(n){return o.onClick(n)},!1,e.pYS)},decls:38,vars:2,consts:[[1,"container"],[1,"controls"],[1,"control"],["id","control1","width","100","height","100"],["control1",""],[1,"info"],[1,"teclas"],[1,"teclado"],[1,"tecla"],[1,"game"],["width","750","height","500",1,"canvas"],["game",""],["class","modal",4,"ngIf"],["id","control2","width","100","height","100"],[1,"modal"],[1,"modal-content"],[1,"play",3,"click"],[1,"modal-content-question"],[1,"card"],[1,"pergunta"],[1,"opcoes"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"canvas",3,4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),e._uU(9,"W"),e.qZA()(),e.TgZ(10,"div",7)(11,"div",8),e._uU(12,"A"),e.qZA(),e.TgZ(13,"div",8),e._uU(14,"S"),e.qZA(),e.TgZ(15,"div",8),e._uU(16,"D"),e.qZA()()()()(),e.TgZ(17,"div",9),e._UZ(18,"canvas",10,11),e.YNc(20,D,12,0,"div",12),e.YNc(21,H,8,2,"div",12),e.qZA(),e.TgZ(22,"div",1)(23,"div",2),e._UZ(24,"canvas",13,4),e.qZA(),e.TgZ(26,"div",5)(27,"div",6)(28,"div",7)(29,"div",8),e._uU(30,"\u2191"),e.qZA()(),e.TgZ(31,"div",7)(32,"div",8),e._uU(33,"\u2190"),e.qZA(),e.TgZ(34,"div",8),e._uU(35,"\u2193"),e.qZA(),e.TgZ(36,"div",8),e._uU(37,"\u2192"),e.qZA()()()()()()),2&t&&(e.xp6(20),e.Q6J("ngIf",!o.play),e.xp6(1),e.Q6J("ngIf",o.question))},dependencies:[x.sg,x.O5],styles:[".container[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center}.game[_ngcontent-%COMP%]{padding:5px;background-color:#fff}.game[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{height:100%}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px;width:100%;justify-content:flex-end}.controls[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none;background-color:#ffffff3a;width:100%;border-radius:100px}.teclado[_ngcontent-%COMP%]{display:flex;justify-content:center}.tecla[_ngcontent-%COMP%]{width:30px;height:30px;align-items:center;border:solid .5px;background-color:#fff}.canvas[_ngcontent-%COMP%]{border:solid;background-color:#fff}.modal[_ngcontent-%COMP%]{display:block;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:#0006}.modal-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;flex-direction:column}.modal-content-question[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}.pergunta[_ngcontent-%COMP%]{font-weight:700}.card[_ngcontent-%COMP%]{padding:10px;background-color:#fff;border-radius:5px}.play[_ngcontent-%COMP%]{height:50px;width:150px;border:solid .5px;border-radius:5px;display:flex;align-items:center;justify-content:center}.play[_ngcontent-%COMP%]:hover{background-color:#00f;color:#fff}@media (max-width:915px){.controls[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:flex}.info[_ngcontent-%COMP%]{display:none}}"]}),s})()},{path:"player",component:O}];let U=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[y.Bz.forChild(I),y.Bz]}),s})(),J=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[x.ez,U]}),s})()}}]);